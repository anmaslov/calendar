---
description: Rules for Go testing
globs: ["**/*_test.go"]
---

# Go Testing Guidelines

## Test Structure
- Use table-driven tests for multiple scenarios
- Group related tests with subtests using `t.Run()`
- Use descriptive test names that explain the scenario

## Test Naming
- Test functions: `TestFunctionName_Scenario_ExpectedResult`
- Example: `TestCreateEvent_ValidInput_ReturnsEvent`

## Assertions
- Use `testify/assert` for simple assertions
- Use `testify/require` when test should stop on failure
- Provide meaningful error messages

## Mocking
- Use interfaces for dependencies to enable mocking
- Use `testify/mock` or `gomock` for mocks
- Keep mocks in `_test.go` files or `mocks/` directory

## Test Organization
```
package_name/
├── service.go
├── service_test.go
└── mocks/
    └── mock_repository.go
```

## Best Practices
- Use `t.Parallel()` for independent tests
- Clean up resources with `t.Cleanup()`
- Use `testing.Short()` to skip long-running tests
- Avoid testing private functions directly
